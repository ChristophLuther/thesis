source("~/Desktop/thesis_code/bnlearn/fit_graphs_hc.R", echo=TRUE)
View(df)
View(df)
View(df)
for (i in graphs_cont){
for (size in sizes){
# load data
filename <- paste("data/", i, "/", i, "_", size, ".csv", sep="")
df <- read.csv(filename)
if (i == "healthcare"){
# as.factor() required for bnlearn.hc()
for (j in c("A", "C", "H")){
df[,j] <- as.factor(df[,j])
}
}
# structure learning and wall time
runtime <- system.time({ bn <- hc(df) })
runtime <- runtime["elapsed"]
line <- paste("runtime in sec - data: ", i, " - size: ", size, " - method: hc:", sep="")
# file runtime.txt has to exist (or be created at this point)
write(line,file="bnlearn/results/hc/runtime.txt",append=TRUE)
write(runtime,file="bnlearn/results/hc/runtime.txt",append=TRUE)
# adjacency matrix
adj_mat <- amat(bn)
amat_file <- paste("bnlearn/results/hc/est_amat/", i, "_", size, ".csv", sep="")
write.csv(adj_mat, file=amat_file, row.names = FALSE)
}
}
View(df)
View(df)
for (i in graphs_cont){
for (size in sizes){
# load data
filename <- paste("data/", i, "/", i, "_", size, ".csv", sep="")
df <- read.csv(filename)
if (i == "healthcare"){
# as.factor() required for bnlearn.hc()
for (j in c("A", "C", "H")){
df[,j] <- as.factor(df[,j])
}
}
if (i == "mehra"){
# as.factor() required for bnlearn.hc()
for (j in c("Region", "Zone", "Type", "Season")){
df[,j] <- as.factor(df[,j])
}
}
# structure learning and wall time
runtime <- system.time({ bn <- hc(df) })
runtime <- runtime["elapsed"]
line <- paste("runtime in sec - data: ", i, " - size: ", size, " - method: hc:", sep="")
# file runtime.txt has to exist (or be created at this point)
write(line,file="bnlearn/results/hc/runtime.txt",append=TRUE)
write(runtime,file="bnlearn/results/hc/runtime.txt",append=TRUE)
# adjacency matrix
adj_mat <- amat(bn)
amat_file <- paste("bnlearn/results/hc/est_amat/", i, "_", size, ".csv", sep="")
write.csv(adj_mat, file=amat_file, row.names = FALSE)
}
}
View(df)
View(df)
for (i in graphs_cont){
for (size in sizes){
# load data
filename <- paste("data/", i, "/", i, "_", size, ".csv", sep="")
df <- read.csv(filename)
if (i == "healthcare"){
# as.factor() required for bnlearn.hc()
for (j in c("A", "C", "H")){
df[,j] <- as.factor(df[,j])
}
}
if (i == "mehra"){
# as.factor() required for bnlearn.hc()
for (j in c("Region", "Zone", "Type", "Season", "Year", "Month", "Day", "Hour")){
df[,j] <- as.factor(df[,j])
}
}
# structure learning and wall time
runtime <- system.time({ bn <- hc(df) })
runtime <- runtime["elapsed"]
line <- paste("runtime in sec - data: ", i, " - size: ", size, " - method: hc:", sep="")
# file runtime.txt has to exist (or be created at this point)
write(line,file="bnlearn/results/hc/runtime.txt",append=TRUE)
write(runtime,file="bnlearn/results/hc/runtime.txt",append=TRUE)
# adjacency matrix
adj_mat <- amat(bn)
amat_file <- paste("bnlearn/results/hc/est_amat/", i, "_", size, ".csv", sep="")
write.csv(adj_mat, file=amat_file, row.names = FALSE)
}
}
View(df)
View(df)
